"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[404],{1930:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"operate/components","title":"Components","description":"Update Helm charts","source":"@site/docs/operate/components.md","sourceDirName":"operate","slug":"/operate/components","permalink":"/operate/components","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Notes on ArgoCD Applications","permalink":"/deploy/argocd_applications"},"next":{"title":"Users and RBAC","permalink":"/operate/users_rbac"}}');var s=t(4848),o=t(8453);const r={sidebar_position:1},i="Components",l={},d=[{value:"Update Helm charts",id:"update-helm-charts",level:2},{value:"Jupyterhub",id:"jupyterhub",level:2},{value:"Adding base server options",id:"adding-base-server-options",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"components",children:"Components"})}),"\n",(0,s.jsx)(n.h2,{id:"update-helm-charts",children:"Update Helm charts"}),"\n",(0,s.jsx)(n.p,{children:"It may be needed to update the Helm charts in order to benefit from security or feature updates of the components. Example of an update for Loki:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"# Add repository locally\nhelm repo add grafana https://grafana.github.io/helm-charts\n# Download the default values for the wanted version\nhelm show values grafana/loki --version A.B.C > loki-values.ref.yaml\n# Then, compare them to the old ones (you can use your preferred tool instead of diff)\ndiff loki-values.ref.yaml infra/files/loki-values.ref.yaml\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Then, change the ",(0,s.jsx)(n.code,{children:"values.override.yaml"})," file accordingly and replace the old ",(0,s.jsx)(n.code,{children:"ref"})," file by the new one."]}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsx)(n.p,{children:"Upgrades can lead to data loss or applications misbehaving. Please read the official updating guides of each components before updating one."})}),"\n",(0,s.jsx)(n.h2,{id:"jupyterhub",children:"Jupyterhub"}),"\n",(0,s.jsx)(n.h2,{id:"adding-base-server-options",children:"Adding base server options"}),"\n",(0,s.jsxs)(n.p,{children:["To add base Jupyter server image options using the Helm chart, modify the ",(0,s.jsx)(n.code,{children:"values.<env>.yaml"})," file of the Helm chart deployment. This file allows to configure various aspects of the Jupyterhub deployment, including the server images."]}),"\n",(0,s.jsx)(n.p,{children:"Here is an example of how to add base server options:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'singleuser:\n  profileList:\n    - display_name: "Datascience environment"\n      description: "Default environment (Python 3.12). See: https://github.com/jupyter/docker-stacks/tree/main/images/datascience-notebook."\n      kubespawner_override:\n        image: quay.io/jupyter/datascience-notebook:python-3.12 # Select the image you need, it can be pulled from GitHub Container Registry, Quay or Docker Hub public registries\n        image_pull_policy: IfNotPresent # Pulls the image only if its tag is not already present on the Kubernetes Node\n        extra_resource_limits:\n          nvidia.com/gpu: 2 # Add this to be able to use the GPUs\n'})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["If custom images, built in a private registry, are needed, use the ",(0,s.jsxs)(n.a,{href:"https://jupyterhub-kubespawner.readthedocs.io/en/latest/spawner.html#kubespawner.KubeSpawner.image_pull_secrets",children:[(0,s.jsx)(n.code,{children:"image_pull_secrets"})," parameter"]}),"."]})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);